<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1206px" preserveAspectRatio="none" style="width:1167px;height:1206px;background:#FFFFFF;" version="1.1" viewBox="0 0 1167 1206" width="1167px" zoomAndPan="magnify"><defs><filter height="300%" id="fwhjqpem9oj6y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[79a26e4ac8bd5100d7277bc5c79d8e58]
cluster DataTransport--><polygon fill="#FFFFFF" filter="url(#fwhjqpem9oj6y)" points="16,6,121,6,128,29.6094,1150,29.6094,1150,964,16,964,16,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="128" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="99" x="20" y="22.5332">DataTransport</text><!--MD5=[08e646b6e49514e876c736bf7ebe2eb0]
cluster Socket--><polygon fill="#FFFFFF" filter="url(#fwhjqpem9oj6y)" points="527,988,581,988,588,1011.6094,711,1011.6094,711,1199,527,1199,527,988" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="527" x2="588" y1="1011.6094" y2="1011.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="531" y="1004.5332">Socket</text><!--MD5=[33bda69caa66fb7c99eaf82bc543b74e]
class UDP_server--><rect codeLine="34" fill="#FEFECE" filter="url(#fwhjqpem9oj6y)" height="212.1953" id="UDP_server" style="stroke:#A80036;stroke-width:1.5;" width="425" x="708.5" y="90.5"/><ellipse cx="883.25" cy="106.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M886.0156,102.375 Q886.1719,102.1563 886.3594,102.0469 Q886.5469,101.9375 886.7656,101.9375 Q887.1406,101.9375 887.375,102.1953 Q887.6094,102.4531 887.6094,103.0625 L887.6094,104.5156 Q887.6094,105.125 887.375,105.3906 Q887.1406,105.6563 886.7656,105.6563 Q886.4219,105.6563 886.2188,105.4531 Q886.0156,105.2656 885.9063,104.75 Q885.8594,104.3906 885.6719,104.2031 Q885.3438,103.8281 884.7344,103.6094 Q884.125,103.3906 883.5,103.3906 Q882.7344,103.3906 882.1016,103.7188 Q881.4688,104.0469 880.9766,104.7969 Q880.4844,105.5469 880.4844,106.5781 L880.4844,107.6719 Q880.4844,108.9063 881.375,109.7266 Q882.2656,110.5469 883.8594,110.5469 Q884.7969,110.5469 885.4531,110.2969 Q885.8438,110.1406 886.2656,109.7031 Q886.5313,109.4375 886.6797,109.3594 Q886.8281,109.2813 887.0313,109.2813 Q887.3594,109.2813 887.6172,109.5391 Q887.875,109.7969 887.875,110.1406 Q887.875,110.4844 887.5313,110.8906 Q887.0313,111.4688 886.2344,111.7969 Q885.1563,112.25 883.8594,112.25 Q882.3438,112.25 881.1406,111.625 Q880.1563,111.125 879.4688,110.0547 Q878.7813,108.9844 878.7813,107.7031 L878.7813,106.5469 Q878.7813,105.2188 879.3984,104.0703 Q880.0156,102.9219 881.1094,102.3047 Q882.2031,101.6875 883.4375,101.6875 Q884.1719,101.6875 884.8203,101.8516 Q885.4688,102.0156 886.0156,102.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="903.75" y="111.4102">UDP_server</text><line style="stroke:#A80036;stroke-width:1.5;" x1="709.5" x2="1132.5" y1="122.5" y2="122.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="716.5" y="148.3359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="728.5" y="155.7549">bool port_open</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="716.5" y="162.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="728.5" y="169.5908">bool known_client</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="716.5" y="176.0078"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="728.5" y="183.4268">struct sockaddr_in cli_addr{}</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="716.5" y="189.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="183" x="728.5" y="197.2627">struct sockaddr_storage cli_storage{}</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="716.5" y="203.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="113" x="728.5" y="211.0986">socklen_t cli_addr_size</text><line style="stroke:#A80036;stroke-width:1.0;" x1="709.5" x2="904.5" y1="137.418" y2="137.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="904.5" y="141.4189">Private</text><line style="stroke:#A80036;stroke-width:1.0;" x1="937.5" x2="1132.5" y1="137.418" y2="137.418"/><line style="stroke:#A80036;stroke-width:1.5;" x1="709.5" x2="1132.5" y1="217.5156" y2="217.5156"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="716.5" y="243.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="728.5" y="250.7705">int open_port()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="709.5" x2="904.5" y1="232.4336" y2="232.4336"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="904.5" y="236.4346">Private</text><line style="stroke:#A80036;stroke-width:1.0;" x1="937.5" x2="1132.5" y1="232.4336" y2="232.4336"/><ellipse cx="719.5" cy="278.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="221" x="728.5" y="282.4424">UDP_server(dt_type_t type, unsigned int port)</text><ellipse cx="719.5" cy="291.8594" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="399" x="728.5" y="296.2783">UDP_server(dt_type_t type, unsigned int port, uint8_t* buffer, uint16_t buffer_size)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="709.5" x2="907" y1="264.1055" y2="264.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="907" y="268.1064">Public</text><line style="stroke:#A80036;stroke-width:1.0;" x1="935" x2="1132.5" y1="264.1055" y2="264.1055"/><!--MD5=[20934f0f42dab29883fe29cb589f3eaa]
class DataTransport--><rect codeLine="71" fill="#FEFECE" filter="url(#fwhjqpem9oj6y)" height="536.5859" id="DataTransport" style="stroke:#A80036;stroke-width:1.5;" width="612" x="313" y="411"/><ellipse cx="575.25" cy="427" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M578.0156,422.875 Q578.1719,422.6563 578.3594,422.5469 Q578.5469,422.4375 578.7656,422.4375 Q579.1406,422.4375 579.375,422.6953 Q579.6094,422.9531 579.6094,423.5625 L579.6094,425.0156 Q579.6094,425.625 579.375,425.8906 Q579.1406,426.1563 578.7656,426.1563 Q578.4219,426.1563 578.2188,425.9531 Q578.0156,425.7656 577.9063,425.25 Q577.8594,424.8906 577.6719,424.7031 Q577.3438,424.3281 576.7344,424.1094 Q576.125,423.8906 575.5,423.8906 Q574.7344,423.8906 574.1016,424.2188 Q573.4688,424.5469 572.9766,425.2969 Q572.4844,426.0469 572.4844,427.0781 L572.4844,428.1719 Q572.4844,429.4063 573.375,430.2266 Q574.2656,431.0469 575.8594,431.0469 Q576.7969,431.0469 577.4531,430.7969 Q577.8438,430.6406 578.2656,430.2031 Q578.5313,429.9375 578.6797,429.8594 Q578.8281,429.7813 579.0313,429.7813 Q579.3594,429.7813 579.6172,430.0391 Q579.875,430.2969 579.875,430.6406 Q579.875,430.9844 579.5313,431.3906 Q579.0313,431.9688 578.2344,432.2969 Q577.1563,432.75 575.8594,432.75 Q574.3438,432.75 573.1406,432.125 Q572.1563,431.625 571.4688,430.5547 Q570.7813,429.4844 570.7813,428.2031 L570.7813,427.0469 Q570.7813,425.7188 571.3984,424.5703 Q572.0156,423.4219 573.1094,422.8047 Q574.2031,422.1875 575.4375,422.1875 Q576.1719,422.1875 576.8203,422.3516 Q577.4688,422.5156 578.0156,422.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79" x="595.75" y="431.9102">DataTransport</text><line style="stroke:#A80036;stroke-width:1.5;" x1="314" x2="924" y1="443" y2="443"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="321" y="468.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="333" y="476.2549">__time_t: timeout_sec</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="321" y="482.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="333" y="490.0908">__suseconds_t: timeout_usec</text><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="602.5" y1="457.918" y2="457.918"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="602.5" y="461.9189">Private</text><line style="stroke:#A80036;stroke-width:1.0;" x1="635.5" x2="924" y1="457.918" y2="457.918"/><polygon fill="none" points="324,512.3438,328,516.3438,324,520.3438,320,516.3438" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="333" y="521.7627">int*: listen_s</text><polygon fill="none" points="324,526.1797,328,530.1797,324,534.1797,320,530.1797" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="333" y="535.5986">bool*: listen_s_set</text><polygon fill="none" points="324,540.0156,328,544.0156,324,548.0156,320,544.0156" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="66" x="333" y="549.4346">int: listen_s_1</text><polygon fill="none" points="324,553.8516,328,557.8516,324,561.8516,320,557.8516" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="96" x="333" y="563.2705">bool: listen_s_set_1</text><polygon fill="none" points="324,567.6875,328,571.6875,324,575.6875,320,571.6875" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="66" x="333" y="577.1064">int: listen_s_2</text><polygon fill="none" points="324,581.5234,328,585.5234,324,589.5234,320,585.5234" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="96" x="333" y="590.9424">bool: listen_s_set_2</text><polygon fill="none" points="324,595.3594,328,599.3594,324,603.3594,320,599.3594" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="333" y="604.7783">int s</text><polygon fill="none" points="324,609.1953,328,613.1953,324,617.1953,320,613.1953" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="333" y="618.6143">unsigned int port</text><polygon fill="none" points="324,623.0313,328,627.0313,324,631.0313,320,627.0313" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="333" y="632.4502">buffer_len: int</text><polygon fill="none" points="324,636.8672,328,640.8672,324,644.8672,320,640.8672" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="333" y="646.2861">int16_t: bytes_recv</text><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="596" y1="503.4258" y2="503.4258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="46" x="596" y="507.4268">Protected</text><line style="stroke:#A80036;stroke-width:1.0;" x1="642" x2="924" y1="503.4258" y2="503.4258"/><line style="stroke:#A80036;stroke-width:1.5;" x1="314" x2="924" y1="652.7031" y2="652.7031"/><polygon fill="#FFFF44" points="324,676.5391,328,680.5391,324,684.5391,320,680.5391" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98" x="333" y="685.958">int timeout_handler()</text><polygon fill="#FFFF44" points="324,690.375,328,694.375,324,698.375,320,694.375" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="333" y="699.7939">int set_listen_addr()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="596" y1="667.6211" y2="667.6211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="46" x="596" y="671.6221">Protected</text><line style="stroke:#A80036;stroke-width:1.0;" x1="642" x2="924" y1="667.6211" y2="667.6211"/><ellipse cx="324" cy="727.0469" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="333" y="731.4658">DataTransport();</text><ellipse cx="324" cy="740.8828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="235" x="333" y="745.3018">DataTransport(dt_type_t type, unsigned int port);</text><ellipse cx="324" cy="754.7188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="410" x="333" y="759.1377">DataTransport(dt_type_t type, unsigned int port, uint8_t* buffer, uint16_t buffer_size)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="605" y1="713.1289" y2="713.1289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="605" y="717.1299">Public</text><line style="stroke:#A80036;stroke-width:1.0;" x1="633" x2="924" y1="713.1289" y2="713.1289"/><ellipse cx="324" cy="786.3906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="444" x="333" y="790.8096">int16_t receive(bool timeout, struct sockaddr_in* addr= nullptr, socklen_t* addr_size= nullptr)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="314" x2="599.5" y1="772.4727" y2="772.4727"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="599.5" y="776.4736">Receive</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="638.5" x2="924" y1="772.4727" y2="772.4727"/><ellipse cx="324" cy="818.0625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="393" x="333" y="822.4814">int send(uint8_t msg, struct sockaddr_in* addr, const socklen_t* addr_size) const</text><ellipse cx="324" cy="831.8984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="520" x="333" y="836.3174">int send(const uint8_t* msg, uint16_t msg_size, struct sockaddr_in* addr, const socklen_t* addr_size) const</text><ellipse cx="324" cy="845.7344" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="586" x="333" y="850.1533">int send(const long long unsigned int *msg, uint8_t msg_size, struct sockaddr_in* addr, const socklen_t* addr_size) const</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="314" x2="606.5" y1="804.1445" y2="804.1445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="25" x="606.5" y="808.1455">Send</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="631.5" x2="924" y1="804.1445" y2="804.1445"/><ellipse cx="324" cy="877.4063" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="225" x="333" y="881.8252">uint8_t* GetBuffer(uint8_t* buff, uint16_t* size)</text><ellipse cx="324" cy="891.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="363" x="333" y="895.6611">long long unsigned int* GetBuffer(long long unsigned int* buff, uint8_t* size)</text><ellipse cx="324" cy="905.0781" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="333" y="909.4971">uint16_t get_buffer()</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="314" x2="604" y1="863.4883" y2="863.4883"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="604" y="867.4893">Getter</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="634" x2="924" y1="863.4883" y2="863.4883"/><ellipse cx="324" cy="936.75" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="267" x="333" y="941.1689">int set_timeout_len(unsigned int sec, unsigned int usec)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="314" x2="604.5" y1="922.832" y2="922.832"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="604.5" y="926.833">Setter</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="633.5" x2="924" y1="922.832" y2="922.832"/><!--MD5=[d1515d178fad2bf0f45f27ac1a5c0712]
class UDP_client--><rect codeLine="49" fill="#FEFECE" filter="url(#fwhjqpem9oj6y)" height="309.0469" id="UDP_client" style="stroke:#A80036;stroke-width:1.5;" width="525" x="148.5" y="42"/><ellipse cx="375.75" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M378.5156,53.875 Q378.6719,53.6563 378.8594,53.5469 Q379.0469,53.4375 379.2656,53.4375 Q379.6406,53.4375 379.875,53.6953 Q380.1094,53.9531 380.1094,54.5625 L380.1094,56.0156 Q380.1094,56.625 379.875,56.8906 Q379.6406,57.1563 379.2656,57.1563 Q378.9219,57.1563 378.7188,56.9531 Q378.5156,56.7656 378.4063,56.25 Q378.3594,55.8906 378.1719,55.7031 Q377.8438,55.3281 377.2344,55.1094 Q376.625,54.8906 376,54.8906 Q375.2344,54.8906 374.6016,55.2188 Q373.9688,55.5469 373.4766,56.2969 Q372.9844,57.0469 372.9844,58.0781 L372.9844,59.1719 Q372.9844,60.4063 373.875,61.2266 Q374.7656,62.0469 376.3594,62.0469 Q377.2969,62.0469 377.9531,61.7969 Q378.3438,61.6406 378.7656,61.2031 Q379.0313,60.9375 379.1797,60.8594 Q379.3281,60.7813 379.5313,60.7813 Q379.8594,60.7813 380.1172,61.0391 Q380.375,61.2969 380.375,61.6406 Q380.375,61.9844 380.0313,62.3906 Q379.5313,62.9688 378.7344,63.2969 Q377.6563,63.75 376.3594,63.75 Q374.8438,63.75 373.6406,63.125 Q372.6563,62.625 371.9688,61.5547 Q371.2813,60.4844 371.2813,59.2031 L371.2813,58.0469 Q371.2813,56.7188 371.8984,55.5703 Q372.5156,54.4219 373.6094,53.8047 Q374.7031,53.1875 375.9375,53.1875 Q376.6719,53.1875 377.3203,53.3516 Q377.9688,53.5156 378.5156,53.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="396.25" y="62.9102">UDP_client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="149.5" x2="672.5" y1="74" y2="74"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="99.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="83" x="168.5" y="107.2549">bool known_host</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="113.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98" x="168.5" y="121.0908">char* ser_hostname</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="127.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="168.5" y="134.9268">char* ser_ip</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="141.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="168.5" y="148.7627">bool is_ip</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="155.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="168.5" y="162.5986">struct sockaddr_in ser_addr{}</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="169.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="189" x="168.5" y="176.4346">struct sockaddr_storage ser_storage{}</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="182.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="168.5" y="190.2705">socklen_t ser_addr_size{}</text><line style="stroke:#A80036;stroke-width:1.0;" x1="149.5" x2="394.5" y1="88.918" y2="88.918"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="394.5" y="92.9189">Private</text><line style="stroke:#A80036;stroke-width:1.0;" x1="427.5" x2="672.5" y1="88.918" y2="88.918"/><line style="stroke:#A80036;stroke-width:1.5;" x1="149.5" x2="672.5" y1="196.6875" y2="196.6875"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="222.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="109" x="168.5" y="229.9424">int setHost(char *host)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="156.5" y="236.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="168.5" y="243.7783">int get_host_by_ip()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="149.5" x2="394.5" y1="211.6055" y2="211.6055"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="394.5" y="215.6064">Private</text><line style="stroke:#A80036;stroke-width:1.0;" x1="427.5" x2="672.5" y1="211.6055" y2="211.6055"/><ellipse cx="159.5" cy="271.0313" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="168.5" y="275.4502">UDP_client()</text><ellipse cx="159.5" cy="284.8672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="321" x="168.5" y="289.2861">UDP_client(dt_type_t type, char* host, unsigned int port, bool is_ip)</text><ellipse cx="159.5" cy="298.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="499" x="168.5" y="303.1221">UDP_client(dt_type_t type, char* host, unsigned int port, bool is_ip, uint8_t* buffer, uint16_t buffer_size)</text><ellipse cx="159.5" cy="312.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="168.5" y="316.958">int16_t send_and_receive(uint8_t msg)</text><ellipse cx="159.5" cy="326.375" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="259" x="168.5" y="330.7939">int16_t send_and_receive(uint8_t *msg, uint16_t size)</text><ellipse cx="159.5" cy="340.2109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="220" x="168.5" y="344.6299">int16_t send_and_receive(uint16_t msg_size)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="149.5" x2="397" y1="257.1133" y2="257.1133"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="397" y="261.1143">Public</text><line style="stroke:#A80036;stroke-width:1.0;" x1="425" x2="672.5" y1="257.1133" y2="257.1133"/><!--MD5=[2aadc824e148f7fc9827b2fb391c50b0]
class dt_type_t--><rect codeLine="23" fill="#FEFECE" filter="url(#fwhjqpem9oj6y)" height="75.6719" id="dt_type_t" style="stroke:#A80036;stroke-width:1.5;" width="81" x="32.5" y="158.5"/><ellipse cx="47.5" cy="174.5" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M46.3594,175.2969 L46.3594,177.7969 L50.6875,177.7969 L50.6875,176.875 Q50.6875,176.2656 50.9297,176 Q51.1719,175.7344 51.5469,175.7344 Q51.9219,175.7344 52.1563,176 Q52.3906,176.2656 52.3906,176.875 L52.3906,179.5 L44.3906,179.5 Q43.7656,179.5 43.5078,179.2656 Q43.25,179.0313 43.25,178.6406 Q43.25,178.2656 43.5156,178.0313 Q43.7813,177.7969 44.3906,177.7969 L44.6563,177.7969 L44.6563,171.1406 L44.3906,171.1406 Q43.7656,171.1406 43.5078,170.9063 Q43.25,170.6719 43.25,170.2813 Q43.25,169.9063 43.5078,169.6719 Q43.7656,169.4375 44.3906,169.4375 L52.0156,169.4375 L52.0156,172.0313 Q52.0156,172.6406 51.7891,172.8984 Q51.5625,173.1563 51.1719,173.1563 Q50.7969,173.1563 50.5625,172.8984 Q50.3281,172.6406 50.3281,172.0313 L50.3281,171.1406 L46.3594,171.1406 L46.3594,173.5938 L47.8438,173.5938 Q47.8438,172.9375 47.9688,172.75 Q48.2344,172.3438 48.7031,172.3438 Q49.0781,172.3438 49.3125,172.6016 Q49.5469,172.8594 49.5469,173.4688 L49.5469,175.4375 Q49.5469,175.9844 49.4219,176.1719 Q49.1563,176.5625 48.7031,176.5625 Q48.2344,176.5625 47.9688,176.1563 Q47.8438,175.9688 47.8438,175.2969 L46.3594,175.2969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="61.5" y="179.4102">dt_type_t</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="112.5" y1="190.5" y2="190.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="38.5" y="205.9189">SZP = 1,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="47" x="38.5" y="219.7549">SYNC = 2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="112.5" y1="226.1719" y2="226.1719"/><!--MD5=[45f3bfb0a79ec97110abe388513c5f18]
class socket--><rect codeLine="108" fill="#FEFECE" filter="url(#fwhjqpem9oj6y)" height="158.6875" id="socket" style="stroke:#A80036;stroke-width:1.5;" width="151" x="543.5" y="1024"/><ellipse cx="596.75" cy="1040" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M599.5156,1035.875 Q599.6719,1035.6563 599.8594,1035.5469 Q600.0469,1035.4375 600.2656,1035.4375 Q600.6406,1035.4375 600.875,1035.6953 Q601.1094,1035.9531 601.1094,1036.5625 L601.1094,1038.0156 Q601.1094,1038.625 600.875,1038.8906 Q600.6406,1039.1563 600.2656,1039.1563 Q599.9219,1039.1563 599.7188,1038.9531 Q599.5156,1038.7656 599.4063,1038.25 Q599.3594,1037.8906 599.1719,1037.7031 Q598.8438,1037.3281 598.2344,1037.1094 Q597.625,1036.8906 597,1036.8906 Q596.2344,1036.8906 595.6016,1037.2188 Q594.9688,1037.5469 594.4766,1038.2969 Q593.9844,1039.0469 593.9844,1040.0781 L593.9844,1041.1719 Q593.9844,1042.4063 594.875,1043.2266 Q595.7656,1044.0469 597.3594,1044.0469 Q598.2969,1044.0469 598.9531,1043.7969 Q599.3438,1043.6406 599.7656,1043.2031 Q600.0313,1042.9375 600.1797,1042.8594 Q600.3281,1042.7813 600.5313,1042.7813 Q600.8594,1042.7813 601.1172,1043.0391 Q601.375,1043.2969 601.375,1043.6406 Q601.375,1043.9844 601.0313,1044.3906 Q600.5313,1044.9688 599.7344,1045.2969 Q598.6563,1045.75 597.3594,1045.75 Q595.8438,1045.75 594.6406,1045.125 Q593.6563,1044.625 592.9688,1043.5547 Q592.2813,1042.4844 592.2813,1041.2031 L592.2813,1040.0469 Q592.2813,1038.7188 592.8984,1037.5703 Q593.5156,1036.4219 594.6094,1035.8047 Q595.7031,1035.1875 596.9375,1035.1875 Q597.6719,1035.1875 598.3203,1035.3516 Q598.9688,1035.5156 599.5156,1035.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="36" x="617.25" y="1044.9102">socket</text><line style="stroke:#A80036;stroke-width:1.5;" x1="544.5" x2="693.5" y1="1056" y2="1056"/><ellipse cx="554.5" cy="1067" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="563.5" y="1071.4189">AF_INET</text><ellipse cx="554.5" cy="1080.8359" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="563.5" y="1085.2549">SOCK_DGRAM</text><line style="stroke:#A80036;stroke-width:1.5;" x1="544.5" x2="693.5" y1="1091.6719" y2="1091.6719"/><ellipse cx="554.5" cy="1102.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="563.5" y="1107.0908">socket(family, type)</text><ellipse cx="554.5" cy="1116.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="563.5" y="1120.9268">bind((address, port))</text><ellipse cx="554.5" cy="1130.3438" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="563.5" y="1134.7627">recvfrom(buffer_size: int)</text><ellipse cx="554.5" cy="1144.1797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="563.5" y="1148.5986">send(msg: bytes)</text><ellipse cx="554.5" cy="1158.0156" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="47" x="563.5" y="1162.4346">connect()</text><ellipse cx="554.5" cy="1171.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="563.5" y="1176.2705">close()</text><!--MD5=[c73236e6e62923f8eb0c3e9375e2ee62]
link UDP_server to DataTransport--><path codeLine="20" d="M854.91,302.76 C836.51,332.07 815.61,365.36 794.04,399.72 " fill="none" id="UDP_server-to-DataTransport" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="787.01,410.9,793.5851,407.9389,793.3807,400.7307,786.8056,403.6918,787.01,410.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5473576d6bb9d2cd5d0a254ee17285b3]
link UDP_client to DataTransport--><path codeLine="21" d="M477.38,351.01 C484.02,366.35 490.88,382.23 497.86,398.36 " fill="none" id="UDP_client-to-DataTransport" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="503.21,410.73,504.4965,403.6346,498.4417,399.7181,497.1552,406.8135,503.21,410.73" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d402314b8de9c76708f81e661f90091d]
link DataTransport to socket--><path codeLine="30" d="M619,948.06 C619,970.22 619,991.48 619,1010.76 " fill="none" id="DataTransport-to-socket" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="619,1023.78,623,1017.78,619,1011.78,615,1017.78,619,1023.78" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dc9b2b0861176afdd7f2096fdf623b54]
@startuml class_diagram

package DataTransport{
    UDP_server - -o DataTransport
    UDP_client - -o DataTransport
    
    enum dt_type_t{
        SZP = 1,
        SYNC = 2
    }
}

package Socket{
    DataTransport - -* socket
}


class UDP_server {
    - -Private- -
    - bool port_open
    - bool known_client
    - struct sockaddr_in cli_addr{}
    - struct sockaddr_storage cli_storage{}
    - socklen_t cli_addr_size
    ___
    - -Private- -
    - int open_port()
    - -Public- -
    + UDP_server(dt_type_t type, unsigned int port)
    + UDP_server(dt_type_t type, unsigned int port, uint8_t* buffer, uint16_t buffer_size)
}

class UDP_client {
    - -Private- -
    - bool known_host
    - char* ser_hostname
    - char* ser_ip
    - bool is_ip
    - struct sockaddr_in ser_addr{}
    - struct sockaddr_storage ser_storage{}
    - socklen_t ser_addr_size{}
    ___
    - -Private- -
    - int setHost(char *host)
    - int get_host_by_ip()
    - -Public- -
    + UDP_client()
    + UDP_client(dt_type_t type, char* host, unsigned int port, bool is_ip)
    + UDP_client(dt_type_t type, char* host, unsigned int port, bool is_ip, uint8_t* buffer, uint16_t buffer_size)
    + int16_t send_and_receive(uint8_t msg)
    + int16_t send_and_receive(uint8_t *msg, uint16_t size)
    + int16_t send_and_receive(uint16_t msg_size)
}

class DataTransport {
    - -Private- -
    - __time_t: timeout_sec
    - __suseconds_t: timeout_usec
    - -Protected- -
    # int*: listen_s
    # bool*: listen_s_set
    # {static} int: listen_s_1
    # {static} bool: listen_s_set_1
    # {static} int: listen_s_2
    # {static} bool: listen_s_set_2
    # int s
    # unsigned int port
    # buffer_len: int
    # int16_t: bytes_recv
    ___
    - -Protected- -
    # int timeout_handler()
    # int set_listen_addr()
    - -Public- -
    + DataTransport();
    + DataTransport(dt_type_t type, unsigned int port);
    + DataTransport(dt_type_t type, unsigned int port, uint8_t* buffer, uint16_t buffer_size)
    ..Receive..
    + int16_t receive(bool timeout, struct sockaddr_in* addr= nullptr, socklen_t* addr_size= nullptr)
    ..Send..
    + int send(uint8_t msg, struct sockaddr_in* addr, const socklen_t* addr_size) const
    + int send(const uint8_t* msg, uint16_t msg_size, struct sockaddr_in* addr, const socklen_t* addr_size) const
    + int send(const long long unsigned int *msg, uint8_t msg_size, struct sockaddr_in* addr, const socklen_t* addr_size) const
    ..Getter..
    + uint8_t* GetBuffer(uint8_t* buff, uint16_t* size)
    + long long unsigned int* GetBuffer(long long unsigned int* buff, uint8_t* size)
    + uint16_t get_buffer()
    ..Setter..
    + int set_timeout_len(unsigned int sec, unsigned int usec)
}

class socket {
    + AF_INET
    + SOCK_DGRAM

    + socket(family, type)
    + bind((address, port))
    + recvfrom(buffer_size: int)
    + send(msg: bytes)
    + connect()
    + close()
}

@enduml

PlantUML version 1.2021.10(Mon Aug 30 15:43:48 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>